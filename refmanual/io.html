
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Input/output routines (pysteps.io) &#8212; pysteps 0.2 documentation</title>
    <link rel="stylesheet" href="../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Optical flow methods (pysteps.motion)" href="motion.html" />
    <link rel="prev" title="Nowcasting methods (pysteps.nowcasts)" href="nowcasts.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="motion.html" title="Optical flow methods (pysteps.motion)"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="nowcasts.html" title="Nowcasting methods (pysteps.nowcasts)"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">pysteps 0.2 documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="input-output-routines-pysteps-io">
<span id="pysteps-io"></span><h1>Input/output routines (<code class="xref py py-mod docutils literal notranslate"><span class="pre">pysteps.io</span></code>)<a class="headerlink" href="#input-output-routines-pysteps-io" title="Permalink to this headline">¶</a></h1>
<p>Methods for browsing data archives, reading 2d precipitation fields and writing
forecasts into files.</p>
<div class="section" id="module-pysteps.io.interface">
<span id="pysteps-io-interface"></span><h2>pysteps.io.interface<a class="headerlink" href="#module-pysteps.io.interface" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="pysteps.io.interface.get_method">
<code class="descclassname">pysteps.io.interface.</code><code class="descname">get_method</code><span class="sig-paren">(</span><em>name</em>, <em>type</em><span class="sig-paren">)</span><a class="headerlink" href="#pysteps.io.interface.get_method" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a callable function for the method corresponding to the given name.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>name</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd><p class="first">Name of the method. The available options are:</p>
<p>Importers:</p>
<table border="1" class="docutils">
<colgroup>
<col width="25%" />
<col width="75%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>bom_rf3</td>
<td>NetCDF files in the Bureau of Meterology (BoM) archive
containing precipitation intensity composites</td>
</tr>
<tr class="row-odd"><td>fmi_pgm</td>
<td>PGM files in the Finnish Meteorological Institute
(FMI) archive containing reflectivity composites (dBZ)</td>
</tr>
<tr class="row-even"><td>mch_gif</td>
<td>GIF files in the MeteoSwiss archive containing
precipitation composites</td>
</tr>
<tr class="row-odd"><td>mch_hdf5</td>
<td>HDF5 file format used by MeteoSiss</td>
</tr>
<tr class="row-even"><td>mch_metranet</td>
<td>metranet files in the MeteoSwiss archive containing
precipitation composites</td>
</tr>
<tr class="row-odd"><td>odim_hdf5</td>
<td>ODIM HDF5 file format used by Eumetnet/OPERA</td>
</tr>
</tbody>
</table>
<p>Exporters:</p>
<table border="1" class="last docutils">
<colgroup>
<col width="19%" />
<col width="81%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>netcdf</td>
<td>NetCDF files conforming to the CF 1.7 specification</td>
</tr>
</tbody>
</table>
</dd>
<dt><strong>type</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd><p class="first last">Type of the method. The available options are ‘importer’ and ‘exporter’.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-pysteps.io.archive">
<span id="pysteps-io-archive"></span><h2>pysteps.io.archive<a class="headerlink" href="#module-pysteps.io.archive" title="Permalink to this headline">¶</a></h2>
<p>Utilities for finding archived files that match the given criteria.</p>
<dl class="function">
<dt id="pysteps.io.archive.find_by_date">
<code class="descclassname">pysteps.io.archive.</code><code class="descname">find_by_date</code><span class="sig-paren">(</span><em>date</em>, <em>root_path</em>, <em>path_fmt</em>, <em>fn_pattern</em>, <em>fn_ext</em>, <em>timestep</em>, <em>num_prev_files=0</em>, <em>num_next_files=0</em><span class="sig-paren">)</span><a class="headerlink" href="#pysteps.io.archive.find_by_date" title="Permalink to this definition">¶</a></dt>
<dd><p>List input files whose timestamp matches the given date.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>date</strong> <span class="classifier-delimiter">:</span> <span class="classifier">datetime.datetime</span></dt>
<dd><p class="first last">The given date.</p>
</dd>
<dt><strong>root_path</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd><p class="first last">The root path to search the input files.</p>
</dd>
<dt><strong>path_fmt</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd><p class="first last">Path format. It may consist of directory names separated by ‘/’ and
date/time specifiers beginning with ‘%’ (e.g. %Y/%m/%d).</p>
</dd>
<dt><strong>fn_pattern</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd><p class="first last">The name pattern of the input files without extension. The pattern can
contain time specifiers (e.g. %H, %M and %S).</p>
</dd>
<dt><strong>fn_ext</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd><p class="first last">Extension of the input files.</p>
</dd>
<dt><strong>timestep</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">Time step between consecutive input files (minutes).</p>
</dd>
<dt><strong>num_prev_files</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">Optional, number of previous files to find before the given timestamp.</p>
</dd>
<dt><strong>num_next_files</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">Optional, number of future files to find after the given timestamp.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>out</strong> <span class="classifier-delimiter">:</span> <span class="classifier">tuple</span></dt>
<dd><p class="first last">If num_prev_files=0 and num_next_files=0, return a pair containing the
found file name and the corresponding timestamp as a datetime.datetime
object. Otherwise, return a tuple of two lists, the first one for the
file names and the second one for the corresponding timestemps. The lists
are sorted in ascending order with respect to timestamp. A None value is
assigned if a file name corresponding to a given timestamp is not found.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="pysteps-io-importers">
<h2>pysteps.io.importers<a class="headerlink" href="#pysteps-io-importers" title="Permalink to this headline">¶</a></h2>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#pysteps.io.importers.import_bom_rf3" title="pysteps.io.importers.import_bom_rf3"><code class="xref py py-obj docutils literal notranslate"><span class="pre">import_bom_rf3</span></code></a>(filename,&nbsp;**kwargs)</td>
<td>Import a NetCDF radar rainfall product from the BoM Rainfields3.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#pysteps.io.importers.import_fmi_pgm" title="pysteps.io.importers.import_fmi_pgm"><code class="xref py py-obj docutils literal notranslate"><span class="pre">import_fmi_pgm</span></code></a>(filename,&nbsp;**kwargs)</td>
<td>Import a 8-bit PGM radar reflectivity composite from the FMI archive.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#pysteps.io.importers.import_mch_gif" title="pysteps.io.importers.import_mch_gif"><code class="xref py py-obj docutils literal notranslate"><span class="pre">import_mch_gif</span></code></a>(filename,&nbsp;**kwargs)</td>
<td>Import a 8-bit gif radar reflectivity composite from the MeteoSwiss archive.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#pysteps.io.importers.import_mch_hdf5" title="pysteps.io.importers.import_mch_hdf5"><code class="xref py py-obj docutils literal notranslate"><span class="pre">import_mch_hdf5</span></code></a>(filename,&nbsp;**kwargs)</td>
<td>Read a precipitation field (and optionally the quality field) from a HDF5 file conforming to the ODIM specification.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#pysteps.io.importers.import_mch_metranet" title="pysteps.io.importers.import_mch_metranet"><code class="xref py py-obj docutils literal notranslate"><span class="pre">import_mch_metranet</span></code></a>(filename,&nbsp;**kwargs)</td>
<td>Import a 8-bit bin radar reflectivity composite from the MeteoSwiss archive.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#pysteps.io.importers.import_odim_hdf5" title="pysteps.io.importers.import_odim_hdf5"><code class="xref py py-obj docutils literal notranslate"><span class="pre">import_odim_hdf5</span></code></a>(filename,&nbsp;**kwargs)</td>
<td>Read a precipitation field (and optionally the quality field) from a HDF5 file conforming to the ODIM specification.</td>
</tr>
</tbody>
</table>
<span class="target" id="module-pysteps.io.importers"></span><p>Methods for importing files containing 2d precipitation fields.</p>
<p>The methods in this module implement the following interface:</p>
<blockquote>
<div>import_xxx(filename, optional arguments)</div></blockquote>
<p>where xxx is the name (or abbreviation) of the file format and filename is the
name of the input file.</p>
<p>The output of each method is a three-element tuple containing the two-dimensional
precipitation field, the corresponding quality field and a metadata dictionary.
If the file contains no quality information, the quality field is set to None.
Pixels containing missing data are set to nan.</p>
<p>The metadata dictionary contains the following mandatory key-value pairs:</p>
<table border="1" class="docutils">
<colgroup>
<col width="25%" />
<col width="75%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Key</th>
<th class="head">Value</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>projection</td>
<td>PROJ.4-compatible projection definition</td>
</tr>
<tr class="row-odd"><td>x1</td>
<td>x-coordinate of the lower-left corner of the data raster
(meters)</td>
</tr>
<tr class="row-even"><td>y1</td>
<td>y-coordinate of the lower-left corner of the data raster
(meters)</td>
</tr>
<tr class="row-odd"><td>x2</td>
<td>x-coordinate of the upper-right corner of the data raster
(meters)</td>
</tr>
<tr class="row-even"><td>y2</td>
<td>y-coordinate of the upper-right corner of the data raster
(meters)</td>
</tr>
<tr class="row-odd"><td>xpixelsize</td>
<td>grid resolution in x-direction (meters)</td>
</tr>
<tr class="row-even"><td>ypixelsize</td>
<td>grid resolution in y-direction (meters)</td>
</tr>
<tr class="row-odd"><td>yorigin</td>
<td>a string specifying the location of the first element in
the data raster w.r.t. y-axis:
‘upper’ = upper border
‘lower’ = lower border</td>
</tr>
<tr class="row-even"><td>institution</td>
<td>name of the institution who provides the data</td>
</tr>
<tr class="row-odd"><td>timestep</td>
<td>time step of the input data (minutes)</td>
</tr>
<tr class="row-even"><td>unit</td>
<td>the physical unit of the data: ‘mm/h’, ‘mm’ or ‘dBZ’</td>
</tr>
<tr class="row-odd"><td>transform</td>
<td>the transformation of the data: None, ‘dB’, ‘Box-Cox’ or
others</td>
</tr>
<tr class="row-even"><td>accutime</td>
<td>the accumulation time in minutes of the data, float</td>
</tr>
<tr class="row-odd"><td>threshold</td>
<td>the rain/no rain threshold with the same unit,
transformation and accutime of the data.</td>
</tr>
<tr class="row-even"><td>zerovalue</td>
<td>the value assigned to the no rain pixels with the same
unit, transformation and accutime of the data.</td>
</tr>
</tbody>
</table>
<dl class="function">
<dt id="pysteps.io.importers.import_bom_rf3">
<code class="descclassname">pysteps.io.importers.</code><code class="descname">import_bom_rf3</code><span class="sig-paren">(</span><em>filename</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#pysteps.io.importers.import_bom_rf3" title="Permalink to this definition">¶</a></dt>
<dd><p>Import a NetCDF radar rainfall product from the BoM Rainfields3.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>filename</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd><p class="first last">Name of the file to import.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>out</strong> <span class="classifier-delimiter">:</span> <span class="classifier">tuple</span></dt>
<dd><p class="first last">A three-element tuple containing the rainfall field in mm/h imported
from the Bureau RF3 netcdf, the quality field and the metadata. The
quality field is currently set to None.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="pysteps.io.importers.import_fmi_pgm">
<code class="descclassname">pysteps.io.importers.</code><code class="descname">import_fmi_pgm</code><span class="sig-paren">(</span><em>filename</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#pysteps.io.importers.import_fmi_pgm" title="Permalink to this definition">¶</a></dt>
<dd><p>Import a 8-bit PGM radar reflectivity composite from the FMI archive.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>filename</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd><p class="first last">Name of the file to import.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first docutils">
<dt><strong>out</strong> <span class="classifier-delimiter">:</span> <span class="classifier">tuple</span></dt>
<dd><p class="first last">A three-element tuple containing the reflectivity composite in dBZ
and the associated quality field and metadata. The quality field is
currently set to None.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">Other Parameters:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body"><dl class="first last docutils">
<dt><strong>gzipped</strong> <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd><p class="first last">If True, the input file is treated as a compressed gzip file.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="pysteps.io.importers.import_mch_gif">
<code class="descclassname">pysteps.io.importers.</code><code class="descname">import_mch_gif</code><span class="sig-paren">(</span><em>filename</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#pysteps.io.importers.import_mch_gif" title="Permalink to this definition">¶</a></dt>
<dd><p>Import a 8-bit gif radar reflectivity composite from the MeteoSwiss
archive.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>filename</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd><p class="first last">Name of the file to import.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first docutils">
<dt><strong>out</strong> <span class="classifier-delimiter">:</span> <span class="classifier">tuple</span></dt>
<dd><p class="first last">A three-element tuple containing the precipitation field in mm/h imported
from a MeteoSwiss gif file and the associated quality field and metadata.
The quality field is currently set to None.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">Other Parameters:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body"><dl class="first last docutils">
<dt><strong>product</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><p class="first">The name of the MeteoSwiss QPE product:</p>
<table border="1" class="last docutils">
<colgroup>
<col width="18%" />
<col width="82%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Product</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>AQC</td>
<td>Acquire</td>
</tr>
<tr class="row-odd"><td>CPC</td>
<td>CombiPrecip</td>
</tr>
<tr class="row-even"><td>RZC</td>
<td>Precip</td>
</tr>
</tbody>
</table>
</dd>
<dt><strong>unit</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><p class="first last">the physical unit of the data: ‘mm/h’, ‘mm’ or ‘dBZ’</p>
</dd>
<dt><strong>accutime</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">the accumulation time in minutes of the data</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="pysteps.io.importers.import_mch_hdf5">
<code class="descclassname">pysteps.io.importers.</code><code class="descname">import_mch_hdf5</code><span class="sig-paren">(</span><em>filename</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#pysteps.io.importers.import_mch_hdf5" title="Permalink to this definition">¶</a></dt>
<dd><p>Read a precipitation field (and optionally the quality field) from a HDF5
file conforming to the ODIM specification.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>filename</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd><p class="first last">Name of the file to import.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first docutils">
<dt><strong>out</strong> <span class="classifier-delimiter">:</span> <span class="classifier">tuple</span></dt>
<dd><p class="first last">A three-element tuple containing the OPERA product for the requested
quantity and the associated quality field and metadata. The quality
field is read from the file if it contains a dataset whose quantity
identifier is ‘QIND’.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">Other Parameters:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body"><dl class="first last docutils">
<dt><strong>qty</strong> <span class="classifier-delimiter">:</span> <span class="classifier">{‘RATE’, ‘ACRR’, ‘DBZH’}</span></dt>
<dd><p class="first last">The quantity to read from the file. The currently supported identitiers
are: ‘RATE’=instantaneous rain rate (mm/h), ‘ACRR’=hourly rainfall
accumulation (mm) and ‘DBZH’=max-reflectivity (dBZ). The default value
is ‘RATE’.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="pysteps.io.importers.import_mch_metranet">
<code class="descclassname">pysteps.io.importers.</code><code class="descname">import_mch_metranet</code><span class="sig-paren">(</span><em>filename</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#pysteps.io.importers.import_mch_metranet" title="Permalink to this definition">¶</a></dt>
<dd><p>Import a 8-bit bin radar reflectivity composite from the MeteoSwiss
archive.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>filename</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd><p class="first last">Name of the file to import.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first docutils">
<dt><strong>out</strong> <span class="classifier-delimiter">:</span> <span class="classifier">tuple</span></dt>
<dd><p class="first last">A three-element tuple containing the precipitation field in mm/h imported
from a MeteoSwiss gif file and the associated quality field and metadata.
The quality field is currently set to None.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">Other Parameters:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body"><dl class="first last docutils">
<dt><strong>product</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><p class="first">The name of the MeteoSwiss QPE product:</p>
<table border="1" class="last docutils">
<colgroup>
<col width="18%" />
<col width="82%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Product</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>AQC</td>
<td>Acquire</td>
</tr>
<tr class="row-odd"><td>CPC</td>
<td>CombiPrecip</td>
</tr>
<tr class="row-even"><td>RZC</td>
<td>Precip</td>
</tr>
</tbody>
</table>
</dd>
<dt><strong>unit</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><p class="first last">the physical unit of the data: ‘mm/h’, ‘mm’ or ‘dBZ’</p>
</dd>
<dt><strong>accutime</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">the accumulation time in minutes of the data</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="pysteps.io.importers.import_odim_hdf5">
<code class="descclassname">pysteps.io.importers.</code><code class="descname">import_odim_hdf5</code><span class="sig-paren">(</span><em>filename</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#pysteps.io.importers.import_odim_hdf5" title="Permalink to this definition">¶</a></dt>
<dd><p>Read a precipitation field (and optionally the quality field) from a HDF5
file conforming to the ODIM specification.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>filename</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd><p class="first last">Name of the file to import.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first docutils">
<dt><strong>out</strong> <span class="classifier-delimiter">:</span> <span class="classifier">tuple</span></dt>
<dd><p class="first last">A three-element tuple containing the OPERA product for the requested
quantity and the associated quality field and metadata. The quality
field is read from the file if it contains a dataset whose quantity
identifier is ‘QIND’.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">Other Parameters:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body"><dl class="first last docutils">
<dt><strong>qty</strong> <span class="classifier-delimiter">:</span> <span class="classifier">{‘RATE’, ‘ACRR’, ‘DBZH’}</span></dt>
<dd><p class="first last">The quantity to read from the file. The currently supported identitiers
are: ‘RATE’=instantaneous rain rate (mm/h), ‘ACRR’=hourly rainfall
accumulation (mm) and ‘DBZH’=max-reflectivity (dBZ). The default value
is ‘RATE’.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-pysteps.io.readers">
<span id="pysteps-io-readers"></span><h2>pysteps.io.readers<a class="headerlink" href="#module-pysteps.io.readers" title="Permalink to this headline">¶</a></h2>
<p>Methods for reading files.</p>
<dl class="function">
<dt id="pysteps.io.readers.read_timeseries">
<code class="descclassname">pysteps.io.readers.</code><code class="descname">read_timeseries</code><span class="sig-paren">(</span><em>inputfns</em>, <em>importer</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#pysteps.io.readers.read_timeseries" title="Permalink to this definition">¶</a></dt>
<dd><p>Read a time series of input files using the methods implemented in the 
importers module and stack them into a 3d array of shape (num_timesteps, 
height, width).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>inputfns</strong> <span class="classifier-delimiter">:</span> <span class="classifier">tuple</span></dt>
<dd><p class="first last">Input files returned by a function implemented in the archive module.</p>
</dd>
<dt><strong>importer</strong> <span class="classifier-delimiter">:</span> <span class="classifier">function</span></dt>
<dd><p class="first last">A function implemented in the importers module.</p>
</dd>
<dt><strong>kwargs</strong> <span class="classifier-delimiter">:</span> <span class="classifier">dict</span></dt>
<dd><p class="first last">Optional keyword arguments for the importer.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>out</strong> <span class="classifier-delimiter">:</span> <span class="classifier">tuple</span></dt>
<dd><p class="first last">A three-element tuple containing the read data and quality rasters and
associated metadata. If an input file name is None, the corresponding
precipitation and quality fields are filled with nan values. If all
input file names are None or if the length of the file name list is
zero, a three-element tuple containing None values is returned.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="pysteps-io-exporters">
<h2>pysteps.io.exporters<a class="headerlink" href="#pysteps-io-exporters" title="Permalink to this headline">¶</a></h2>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#pysteps.io.exporters.initialize_forecast_exporter_netcdf" title="pysteps.io.exporters.initialize_forecast_exporter_netcdf"><code class="xref py py-obj docutils literal notranslate"><span class="pre">initialize_forecast_exporter_netcdf</span></code></a>(…[,&nbsp;…])</td>
<td>Initialize a netCDF forecast exporter.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#pysteps.io.exporters.export_forecast_dataset" title="pysteps.io.exporters.export_forecast_dataset"><code class="xref py py-obj docutils literal notranslate"><span class="pre">export_forecast_dataset</span></code></a>(F,&nbsp;exporter)</td>
<td>Write a forecast array into a file.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#pysteps.io.exporters.close_forecast_file" title="pysteps.io.exporters.close_forecast_file"><code class="xref py py-obj docutils literal notranslate"><span class="pre">close_forecast_file</span></code></a>(exporter)</td>
<td>Finish writing forecasts and close the file associated with a forecast exporter.</td>
</tr>
</tbody>
</table>
<span class="target" id="module-pysteps.io.exporters"></span><p>Methods for writing forecasts of 2d precipitation fields into various file
formats.</p>
<p>Each exporter method in this module has its own initialization function that
implements the following interface:</p>
<blockquote>
<div><p>initialize_forecast_exporter_xxx(filename, startdate, timestep, num_timesteps,   shape, num_ens_members, metadata, incremental=None)</p>
<p>where xxx describes the file format. This function creates the file and writes
the metadata. The datasets are written by calling export_forecast_dataset, and
the file is closed by calling close_forecast_file.</p>
<p>The arguments in the above are defined as follows:</p>
<table border="1" class="docutils">
<colgroup>
<col width="22%" />
<col width="22%" />
<col width="56%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Argument</th>
<th class="head">Type/values</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>filename</td>
<td>str</td>
<td>name of the output file</td>
</tr>
<tr class="row-odd"><td>startdate</td>
<td>datetime.datetime</td>
<td>start date of the forecast</td>
</tr>
<tr class="row-even"><td>timestep</td>
<td>int</td>
<td>time step of the forecast (minutes)</td>
</tr>
<tr class="row-odd"><td>n_timesteps</td>
<td>int</td>
<td>number of time steps in the forecast
this argument is ignored if incremental is
set to ‘timestep’.</td>
</tr>
<tr class="row-even"><td>shape</td>
<td>tuple</td>
<td>two-element tuple defining the shape
(height,width) of the forecast grids</td>
</tr>
<tr class="row-odd"><td>n_ens_members</td>
<td>int</td>
<td>number of ensemble members in the forecast
this argument is ignored if incremental is
set to ‘member’</td>
</tr>
<tr class="row-even"><td>metadata</td>
<td>dict</td>
<td>metadata dictionary containing the
projection,x1,x2,y1,y2 and unit attributes
described in the documentation of
pysteps.io.importers</td>
</tr>
<tr class="row-odd"><td>incremental</td>
<td>{‘timestep’,
‘member’}</td>
<td>Allow incremental writing of datasets into
the netCDF file
the available options are:
‘timestep’ = write a forecast or a
forecast ensemble for a given time step
‘member’ = write a forecast sequence
for a given ensemble member</td>
</tr>
</tbody>
</table>
<p>The return value is a dictionary containing an exporter object. This can be
used with export_forecast_dataset to write datasets into the netCDF file.</p>
</div></blockquote>
<dl class="function">
<dt id="pysteps.io.exporters.close_forecast_file">
<code class="descclassname">pysteps.io.exporters.</code><code class="descname">close_forecast_file</code><span class="sig-paren">(</span><em>exporter</em><span class="sig-paren">)</span><a class="headerlink" href="#pysteps.io.exporters.close_forecast_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Finish writing forecasts and close the file associated with a forecast
exporter.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>exporter</strong> <span class="classifier-delimiter">:</span> <span class="classifier">dict</span></dt>
<dd><p class="first last">An exporter object created with any initialization method implemented
in this module.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="pysteps.io.exporters.export_forecast_dataset">
<code class="descclassname">pysteps.io.exporters.</code><code class="descname">export_forecast_dataset</code><span class="sig-paren">(</span><em>F</em>, <em>exporter</em><span class="sig-paren">)</span><a class="headerlink" href="#pysteps.io.exporters.export_forecast_dataset" title="Permalink to this definition">¶</a></dt>
<dd><p>Write a forecast array into a file. The written dataset has dimensions
(num_ens_members,num_timesteps,shape[0],shape[1]), where shape refers to
the shape of the two-dimensional forecast grids. If the exporter was
initialized with incremental!=None, the array is appended to the existing
dataset either along the ensemble member or time axis.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>exporter</strong> <span class="classifier-delimiter">:</span> <span class="classifier">dict</span></dt>
<dd><p class="first last">An exporter object created with any initialization method implemented
in this module.</p>
</dd>
<dt><strong>F</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array_like</span></dt>
<dd><p class="first">The array to write. The required shape depends on the choice of the
‘incremental’ parameter the exporter was initialized with:</p>
<table border="1" class="last docutils">
<colgroup>
<col width="27%" />
<col width="73%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">incremental</th>
<th class="head">required shape</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>None</td>
<td>(num_ens_members,num_timesteps,shape[0],shape[1])</td>
</tr>
<tr class="row-odd"><td>‘timestep’</td>
<td>(num_ens_members,shape[0],shape[1])</td>
</tr>
<tr class="row-even"><td>‘member’</td>
<td>(num_timesteps,shape[0],shape[1])</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="pysteps.io.exporters.initialize_forecast_exporter_netcdf">
<code class="descclassname">pysteps.io.exporters.</code><code class="descname">initialize_forecast_exporter_netcdf</code><span class="sig-paren">(</span><em>filename</em>, <em>startdate</em>, <em>timestep</em>, <em>n_timesteps</em>, <em>shape</em>, <em>n_ens_members</em>, <em>metadata</em>, <em>incremental=None</em><span class="sig-paren">)</span><a class="headerlink" href="#pysteps.io.exporters.initialize_forecast_exporter_netcdf" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize a netCDF forecast exporter.</p>
</dd></dl>

<dl class="function">
<dt id="pysteps.io.exporters.initialize_forecast_exporter_odimhdf5">
<code class="descclassname">pysteps.io.exporters.</code><code class="descname">initialize_forecast_exporter_odimhdf5</code><span class="sig-paren">(</span><em>filename</em>, <em>startdate</em>, <em>timestep</em>, <em>n_timesteps</em>, <em>shape</em>, <em>n_ens_members</em>, <em>metadata</em>, <em>incremental=None</em><span class="sig-paren">)</span><a class="headerlink" href="#pysteps.io.exporters.initialize_forecast_exporter_odimhdf5" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize a ODIM HDF5 forecast exporter.</p>
</dd></dl>

</div>
<div class="section" id="module-pysteps.io.nowcast_importers">
<span id="pysteps-io-nowcast-importers"></span><h2>pysteps.io.nowcast_importers<a class="headerlink" href="#module-pysteps.io.nowcast_importers" title="Permalink to this headline">¶</a></h2>
<p>Methods for importing nowcast files.</p>
<p>The methods in this module implement the following interface:</p>
<blockquote>
<div>import_xxx(filename, optional arguments)</div></blockquote>
<p>where xxx is the name (or abbreviation) of the file format and filename is the
name of the input file.</p>
<p>The output of each method is a two-element tuple containing the nowcast array
and a metadata dictionary.</p>
<p>The metadata dictionary contains the following mandatory key-value pairs:</p>
<table border="1" class="docutils">
<colgroup>
<col width="25%" />
<col width="75%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Key</th>
<th class="head">Value</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>projection</td>
<td>PROJ.4-compatible projection definition</td>
</tr>
<tr class="row-odd"><td>x1</td>
<td>x-coordinate of the lower-left corner of the data raster
(meters)</td>
</tr>
<tr class="row-even"><td>y1</td>
<td>y-coordinate of the lower-left corner of the data raster
(meters)</td>
</tr>
<tr class="row-odd"><td>x2</td>
<td>x-coordinate of the upper-right corner of the data raster
(meters)</td>
</tr>
<tr class="row-even"><td>y2</td>
<td>y-coordinate of the upper-right corner of the data raster
(meters)</td>
</tr>
<tr class="row-odd"><td>xpixelsize</td>
<td>grid resolution in x-direction (meters)</td>
</tr>
<tr class="row-even"><td>ypixelsize</td>
<td>grid resolution in y-direction (meters)</td>
</tr>
<tr class="row-odd"><td>yorigin</td>
<td>a string specifying the location of the first element in
the data raster w.r.t. y-axis:
‘upper’ = upper border
‘lower’ = lower border</td>
</tr>
<tr class="row-even"><td>institution</td>
<td>name of the institution who provides the data</td>
</tr>
<tr class="row-odd"><td>timestep</td>
<td>time step of the input data (minutes)</td>
</tr>
<tr class="row-even"><td>unit</td>
<td>the physical unit of the data: ‘mm/h’, ‘mm’ or ‘dBZ’</td>
</tr>
<tr class="row-odd"><td>transform</td>
<td>the transformation of the data: None, ‘dB’, ‘Box-Cox’ or
others</td>
</tr>
<tr class="row-even"><td>accutime</td>
<td>the accumulation time in minutes of the data, float</td>
</tr>
<tr class="row-odd"><td>threshold</td>
<td>the rain/no rain threshold with the same unit,
transformation and accutime of the data.</td>
</tr>
<tr class="row-even"><td>zerovalue</td>
<td>it is the value assigned to the no rain pixels with the
same unit, transformation and accutime of the data.</td>
</tr>
</tbody>
</table>
<dl class="function">
<dt id="pysteps.io.nowcast_importers.import_netcdf_pysteps">
<code class="descclassname">pysteps.io.nowcast_importers.</code><code class="descname">import_netcdf_pysteps</code><span class="sig-paren">(</span><em>filename</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#pysteps.io.nowcast_importers.import_netcdf_pysteps" title="Permalink to this definition">¶</a></dt>
<dd><p>Read a nowcast or a nowcast ensemble from a NetCDF file conforming to the
CF 1.7 specification.</p>
</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="nowcasts.html"
                        title="previous chapter">Nowcasting methods (<code class="docutils literal notranslate"><span class="pre">pysteps.nowcasts</span></code>)</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="motion.html"
                        title="next chapter">Optical flow methods (<code class="docutils literal notranslate"><span class="pre">pysteps.motion</span></code>)</a></p>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="motion.html" title="Optical flow methods (pysteps.motion)"
             >next</a> |</li>
        <li class="right" >
          <a href="nowcasts.html" title="Nowcasting methods (pysteps.nowcasts)"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">pysteps 0.2 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2018, Seppo Pulkkinen, Daniele Nerini and Loris Foresti.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.2.
    </div>
  </body>
</html>